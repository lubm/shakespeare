<html>
  <head>
    <title>Database Administration</title>
    <script
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">
    </script>
    <script src="static/js/custom.js" type="text/javascript"></script>
  </head>
  <body>
    <h2>Database Administration</h2>
    <h3>Uploaded Files</h3>
    {% if length %}
    <table border="1">
      <tr>
        <td>Filename</td>
        <td>Uploaded on</td>
        <td>Generate Index</td>
        <td>Index Link</td>
      </tr>
      {% for item in items %}
      <tr>
        <td><a href="/blobstore/{{ item.blobkey }}">{{ item.filename }}</a></td>
        <td>{{ item.uploaded_on }}</td>
        <td align="center">
            <button onclick="updateForm(this, '{{ item.key() }}', '{{
              item.blobkey }}', '{{item.filename}}');" {% if item.index_link %} 
              disabled="disabled" {% endif %}>
              Generate
          </button>
        </td>
        <td>
          {% if item.index_link %}
          <a href="{{ item.index_link }}">index</a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </table>
    {% else %}
    <div>No files uploaded yet!</div>
    {% endif %}
    <h3>Upload New File</h3>
    <form action="{{ upload_url }}" method="POST" enctype="multipart/form-data">
      <table>
        <tr>
          <td>From your computer:</td>
          <td><input type="file" name="file" id="file" /></td>
        </tr>
        <tr>
          <td>Give it a name:</td>
          <td><input type="textfield" id="name" name="name" /></td>
        </tr>
        <tr>
          <td></td>
          <td><input type="submit" name="submit" value="Upload"></td>
        </tr>
      </table>
    </form>
    <h3>Clear the Database</h3>
    <form action="/clear">
      <input type="submit" value="Clear"/>
    </form> 
  </body>
</html>
